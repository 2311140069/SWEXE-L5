<h2>ツイート一覧</h2>

<% @tweets.each do |e| %>
  <div style="margin-bottom: 15px; border-bottom: 1px solid #ccc; padding-bottom: 10px;">
    <p><%= e.message %></p>

    <p>❤️ <%= e.like_users.count %>件</p>

    <% if current_user && e.user == current_user %>
      <%= link_to '削除', tweet_path(e), data: { turbo_method: :delete }, class: "btn" %>
    <% end %>

    <% if current_user %>
      <% if e.liked?(current_user) %>
        <%= link_to 'いいね削除', like_path(e), data: { turbo_method: :delete }, class: "btn" %>
      <% else %>
        <%= link_to 'いいね', likes_path(tweet_id: e.id), data: { turbo_method: :post }, class: "btn" %>
      <% end %>
    <% end %>
  </div>
<% end %>

<hr>

<%= link_to "新規追加", new_tweet_path %><br>

<% if current_user %>
  <p>
    ログイン中UID：<%= current_user.uid %><br>
    <%= link_to "プロフィール管理", user_path(current_user) %> |
    <%= link_to "ログアウト", logout_path, data: { turbo_method: :delete } %>
  </p>
<% else %>
  <%= link_to "ログイン", root_path %>
<% end %>